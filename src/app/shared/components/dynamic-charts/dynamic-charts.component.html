<div class="dynamic-charts-container">
  <!-- Sección de Filtros -->
  <form [formGroup]="filterForm" class="filter-form">
    <mat-form-field appearance="fill">
      <mat-label>Filtro de tiempo</mat-label>
      <mat-select formControlName="timeFilter">
        <mat-option value="month">Mes</mat-option>
        <mat-option value="year">Año Completo</mat-option>
      </mat-select>
    </mat-form-field>

    <!-- Si se filtra por mes, mostrar selector de mes -->
    <div *ngIf="filterForm.value.timeFilter === 'month'">
      <mat-form-field appearance="fill">
        <mat-label>Mes</mat-label>
        <mat-select formControlName="selectedMonth">
          <mat-option *ngFor="let m of [1,2,3,4,5,6,7,8,9,10,11,12]" [value]="m">
            {{ m }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <mat-form-field appearance="fill">
      <mat-label>Año</mat-label>
      <input matInput type="number" formControlName="selectedYear">
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Categoría</mat-label>
      <mat-select formControlName="category">
        <mat-option value="">Todas</mat-option>
        <mat-option *ngFor="let cat of categories" [value]="cat">
          {{ cat }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </form>

  <!-- Sección de Gráficos -->
  <div class="charts">
    <!-- Gráfico de Torta -->
    <div class="chart-item">
      <h3>Gastos por Categoría (Torta)</h3>
      <canvas baseChart
        [data]="pieChartData"
        [options]="pieChartOptions"
        [type]="pieChartType">
      </canvas>
    </div>
    <!-- Gráfico de Barras -->
    <div class="chart-item">
      <h3>Gastos por Categoría (Barras)</h3>
      <canvas baseChart
        [data]="barChartData"
        [options]="barChartOptions"
        [type]="barChartType">
      </canvas>
    </div>
    <!-- Gráfico de Tendencia -->
    <div class="chart-item">
      <h3>Tendencia de Gastos</h3>
      <canvas baseChart
        [data]="lineChartData"
        [options]="lineChartOptions"
        [type]="lineChartType">
      </canvas>
    </div>
  </div>
</div>
